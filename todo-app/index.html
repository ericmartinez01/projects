<!DOCTYPE html>
<html>
    <head>
        <title>The Todo App</title>
    </head>
    <body>
        <h1>To-Do List</h1>
        <input type='text' id="input-field" placeholder="New Todo">
        <button id="add-todo">Submit</button>
        <button id="clear-list">Clear List</button>
        <ul></ul>
    </body>
    <script src="todo-app.js"></script>
    <script>
    
    let todoItems = {
        todos: [],
        addTodo: function(text) {
            this.todos.push({
                todo: text,
                completed: false
            })
            console.log(this.todos)
        }, 
        deleteTodo: function(index) {
            todoItems.todos.splice(index, 1);
            console.log(this.todos)
        }
    };
   
    let inputField = document.getElementById('input-field');
    let addTodoButton = document.getElementById('add-todo');


    let createTodo = addTodoButton.addEventListener('click', function (){
        let paragraph = document.createElement('p');
        let deleteButton = document.createElement('button');
        let doneButton = document.createElement('button');
        todoItems.addTodo(inputField.value);
        
        // todo text
        paragraph.innerText = inputField.value;
        document.querySelector('body').appendChild(paragraph)
        
        // delete button
        deleteButton.innerText = 'X';
        deleteButton.className = inputField.value;
        paragraph.appendChild(deleteButton);

        // done button
        doneButton.innerText = 'Done'
        paragraph.appendChild(doneButton)
        
        inputField.value = '';


        paragraph.addEventListener('click', function(e) {
            if(deleteButton.className === e.target.className)
                var ti = todoItems.todos.findIndex((text) => {
                    return text.todo === e.target.className
                });
        todoItems.deleteTodo(ti);
        })
    });
    
    

    </script>
</html>